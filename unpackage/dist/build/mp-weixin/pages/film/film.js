(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/film/film"],{"4bf0":function(e,t,n){},"91be":function(e,t,n){"use strict";var a=n("4bf0"),r=n.n(a);r.a},"9b1e":function(e,t,n){"use strict";n.r(t);var a=n("e9fd"),r=n.n(a);for(var u in a)"default"!==u&&function(e){n.d(t,e,(function(){return a[e]}))}(u);t["default"]=r.a},abdb:function(e,t,n){"use strict";n.r(t);var a=n("e26c"),r=n("9b1e");for(var u in r)"default"!==u&&function(e){n.d(t,e,(function(){return r[e]}))}(u);n("91be");var o,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);t["default"]=s.exports},e26c:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return a}));var a={uSearch:function(){return n.e("node-modules/uview-ui/components/u-search/u-search").then(n.bind(null,"616a"))},uButton:function(){return n.e("node-modules/uview-ui/components/u-button/u-button").then(n.bind(null,"0ddf"))},uWaterfall:function(){return n.e("node-modules/uview-ui/components/u-waterfall/u-waterfall").then(n.bind(null,"9c76"))},uLazyLoad:function(){return n.e("node-modules/uview-ui/components/u-lazy-load/u-lazy-load").then(n.bind(null,"0af7"))},uLoadmore:function(){return n.e("node-modules/uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"968d"))},uBackTop:function(){return n.e("node-modules/uview-ui/components/u-back-top/u-back-top").then(n.bind(null,"4b7e"))},uSelect:function(){return n.e("node-modules/uview-ui/components/u-select/u-select").then(n.bind(null,"e35d"))},uTopTips:function(){return n.e("node-modules/uview-ui/components/u-top-tips/u-top-tips").then(n.bind(null,"6d1d"))},uMask:function(){return n.e("node-modules/uview-ui/components/u-mask/u-mask").then(n.bind(null,"dbf2"))},uLoading:function(){return n.e("node-modules/uview-ui/components/u-loading/u-loading").then(n.bind(null,"bd27"))},uToast:function(){return n.e("node-modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"221d"))}},r=function(){var e=this,t=e.$createElement;e._self._c},u=[]},e321:function(e,t,n){"use strict";(function(e){n("ecd3");a(n("66fd"));var t=a(n("abdb"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},e9fd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("a34a")),r=o(n("8139")),u=o(n("2398"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,o=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,u=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw u}}}}function s(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t,n,a,r,u,o){try{var i=e[u](o),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(a,r)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var u=e.apply(t,n);function o(e){l(u,a,r,o,i,"next",e)}function i(e){l(u,a,r,o,i,"throw",e)}o(void 0)}))}}var f={data:function(){return{search:"",site:{},siteShow:!1,siteList:[],type:{},typeShow:!1,typeList:[],flowList:[],loadStatus:"loadmore",scrollTop:0,pageCount:0,recordcount:0,mask:!1,r18KeyWords:["伦理","论理","倫理","福利","激情","理论","写真","情色","美女","街拍","赤足","性感","里番"]}},methods:{searchEvent:function(){var e=this;return d(a.default.mark((function t(){var n,u,o,s,c;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.search){t.next=2;break}return t.abrupt("return",!1);case 2:return e.mask=!0,e.flowList=[],e.$refs.uWaterfall.clear(),t.next=7,r.default.search(e.site.key,e.search);case 7:if(n=t.sent,!(n.length>=1)){t.next=28;break}u=i(n),t.prev=10,u.s();case 12:if((o=u.n()).done){t.next=20;break}return s=o.value,t.next=16,r.default.detail(e.site.key,s.id);case 16:c=t.sent,e.flowList.push(c);case 18:t.next=12;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](10),u.e(t.t0);case 25:return t.prev=25,u.f(),t.finish(25);case 28:e.mask=!1;case 29:case"end":return t.stop()}}),t,null,[[10,22,25,28]])})))()},searchClearEvent:function(){var e=this;return d(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.seach="",e.mask=!0,e.flowList=[],e.$refs.uWaterfall.clear(),t.next=6,e.getPage(e.type.tid);case 6:return t.next=8,e.addData(e.site.key,e.pageCount,e.type.tid);case 8:return e.pageCount--,t.next=11,e.addData(e.site.key,e.pageCount,e.type.tid);case 11:e.mask=!1;case 12:case"end":return t.stop()}}),t)})))()},openSiteSelect:function(){var e=this;return d(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.siteShow=!0,t.next=3,u.default.get("site",e.site.key);case 3:t.sent;case 4:case"end":return t.stop()}}),t)})))()},siteConfirm:function(e){var t=this;return d(a.default.mark((function n(){var r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.mask=!0,t.flowList=[],t.$refs.uWaterfall.clear(),n.next=5,u.default.get("site",e[0].value);case 5:return r=n.sent,t.site=r.data,n.next=9,t.getPage();case 9:return n.next=11,t.getClass(t.site.key);case 11:return n.next=13,t.addData(t.site.key,t.pageCount);case 13:return t.pageCount--,n.next=16,t.addData(t.site.key,t.pageCount);case 16:t.mask=!1;case 17:case"end":return n.stop()}}),n)})))()},openTypeSelect:function(){this.typeShow=!0},typeConfirm:function(e){var t=this;return d(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.type={name:e[0].label,tid:e[0].value},t.mask=!0,t.flowList=[],t.$refs.uWaterfall.clear(),n.next=6,t.getPage(t.type.tid);case 6:return n.next=8,t.addData(t.site.key,t.pageCount,t.type.tid);case 8:return t.pageCount--,n.next=11,t.addData(t.site.key,t.pageCount,t.type.tid);case 11:t.mask=!1;case 12:case"end":return n.stop()}}),n)})))()},openDetail:function(e){var t="/pages/detail/detail?site=".concat(this.site.key,"&id=").concat(e.id);this.$u.route({url:t})},getSite:function(){var e=this;return d(a.default.mark((function t(){var n,r,o,s,c;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.default.getAll("site");case 2:if(n=t.sent,!n.flag){t.next=10;break}r=[],o=i(n.data);try{for(o.s();!(s=o.n()).done;)c=s.value,c.isActive&&r.push(c)}catch(a){o.e(a)}finally{o.f()}e.siteList=r,t.next=12;break;case 10:return e.$refs.uToast.show({title:"读取视频源出错",type:"warning",duration:"2300"}),t.abrupt("return",!1);case 12:return e.site=e.siteList[0],t.next=15,e.getPage();case 15:return t.next=17,e.getClass(e.site.key);case 17:return t.next=19,e.addData(e.site.key,e.pageCount);case 19:return e.pageCount--,t.next=22,e.addData(e.site.key,e.pageCount);case 22:case"end":return t.stop()}}),t)})))()},getPage:function(e){var t=this;return d(a.default.mark((function n(){var u;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.default.page(t.site.key,e);case 2:u=n.sent,t.pageCount=u.pagecount,t.recordcount=u.recordcount;case 5:case"end":return n.stop()}}),n)})))()},getClass:function(e){var t=this;return d(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.typeList=[{name:"最新",tid:0}],t.type={name:"最新",tid:0},r.default.class(e).then((function(e){var n=["电影","电影片","电视剧","连续剧","综艺","动漫"];e.forEach((function(e){n.includes(e.name)||t.typeList.push(e)}))}));case 3:case"end":return n.stop()}}),n)})))()},addData:function(e,t,n){var o=this;return d(a.default.mark((function i(){var s,c,l,d;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e,t,n,"lalala"),a.next=3,r.default.list(e,t,n);case 3:return s=a.sent,a.next=6,u.default.get("setting","config");case 6:for(c=a.sent,l=function(e){var t=s[e];if(c.data.R18){var n=o.r18KeyWords.some((function(e){return t.name.includes(e)})),a=o.r18KeyWords.some((function(e){return t.type.includes(e)}));!0!==n&&!0!==a&&o.flowList.push(t)}else o.flowList.push(t)},d=0;d<s.length;d++)l(d);o.flowList.length<=6&&t&&(o.pageCount--,o.addData(e,o.pageCount,n));case 10:case"end":return a.stop()}}),i)})))()}},onPageScroll:function(e){this.scrollTop=e.scrollTop},onLoad:function(){this.getSite()},onReachBottom:function(){var e=this;return d(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e.search){t.next=3;break}return e.loadStatus="nomore",t.abrupt("return",!1);case 3:return e.loadStatus="loading",e.pageCount--,t.next=7,e.addData(e.site.key,e.pageCount,e.type.tid);case 7:e.loadStatus="loadmore";case 8:case"end":return t.stop()}}),t)})))()},onTabItemTap:function(){this.getSite()}};t.default=f}},[["e321","common/runtime","common/vendor"]]]);